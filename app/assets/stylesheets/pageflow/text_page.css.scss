@include pageflow-page-type(text_page);

$nav-bar-margin: 85px;

$inverted-background-color: black;

@mixin pageflow-text-page-block-image {
  @media screen and (max-width: 1400px) {
    width: 38%;
  }
  @media screen and (max-width: 1100px) {
    display: block;
    position: static;
    width: auto;
    margin: 0 0 1em 0;
    padding: 0;
    float: none;
    @content;
  }
}

.page .text_page, .js .page .text_page, .js .page:first-child .text_page, .page:first-child .text_page {

  .backgroundArea {

    .fixed_header_area {
      position: absolute;
      width: 100%;
      .page_header_wrapper {
        padding: 200px 12% 0% 8%;
        @include mobile {
          padding: 85px 12% 0% 8%;
        }

        .page_header {

          h2 {
            margin: 0;
          }
        }
      }
    }
  }

  .scroller, .scroller {
    > div {
      padding: 0;
      position: relative;

      width: auto;

      .contentInnerWrapper {
        position: relative;
        color: black;

        .content_background_layer {
          height: 100%;
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          content: "";
          display: block;
          background-color: white;
          z-index: -1;
        }

        .page_header {
          position: absolute;
          bottom: 100%;
          width: 100%;
          color: white;
          display: none;

          h2 {
            text-align:center;
            padding: 2em 0;
            margin: 0;
            span {
              margin: 0 auto;
            }

            padding-right: $nav-bar-margin;

            @include pad_portrait {
              padding-right: 0;
            }

          }

          .header_background_layer {
            content: "";
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background-color: black;
            opacity: 1;
            z-index: -1;
          }
        }

        .contentText > * {
          margin: 0 auto;

          @include phone {
            margin: 0;
          }
        }

        .contentText {
          font-size: 0.8em;
          max-width: 500px;
          margin: auto;
          min-height: 300px;
          padding: 6em 0 12em 0;
          box-sizing: content-box;

          @include phone {
            max-width: 84%;
            font-size: 1em;
          }

          padding-right: $nav-bar-margin;

          @include pad_portrait {
            padding-right: 0;
          }

          h3 {
            width: 100%;
            padding-bottom: 2em;
            font-size: 1.5em;
          }

          @include pad_portrait {
            padding-right: 0;
          }

          .inline_image {
            max-width: 400px;
            height: auto;
            background-size: cover;
            background-position: center;
            float: right;
            margin-left: 30px;
            margin-top: 0px;
            margin-bottom: 30px;
            margin-right: -150px;

            padding: 0;
            margin-bottom: 30px;

            &.no_image_assigned {
              display: none;
            }

            @include phone {
              float: none;
              width: 100%;
              max-width: 500px;
              margin: 1em auto;
            }

            .default-image {
              height: 196px;
              background: #efefef;
            }
            img {
              width: 100%;
              height: auto;
              display:block;
            }
            div {
              background-color: black;
              width: auto;
              color: white;

              span {
                padding: 10px;
                display: block;
              }
            }
          }
          p {
            width: 100%;
          }
        }
      }
    }

    &.inline_text_position_left {
      > div .contentInnerWrapper .contentText {
        margin-left: 8%;
        padding-right: 0;

        .inline_image {
          float: none;
          position: absolute;
          right: 0;
          width: 45%;
          margin-right: 8%;
          max-width: initial;

          @include pageflow-text-page-block-image;
        }


      }
    }

    &.inline_text_position_right {
      > div .contentInnerWrapper .contentText {
        margin-right: 12%;
        padding-right: 0;

        .inline_image {
          float: none;
          position: absolute;
          left: 0;
          width: 45%;
          margin-left: 8%;
          max-width: initial;

          @include pageflow-text-page-block-image;
        }
      }
    }
  }
}

.text_position_center, .text_position_right .text_position_center {
  .text_page {
    .shadow {
      display: none !important;
    }
    .fixed_header_area {
      display: none !important;
    }
    .contentInnerWrapper .page_header {
      display: block !important;
      max-width: initial;
      margin-left: initial;
    }
  }
}

.inline_text_position_center {
  .inline_image {
    float: right;
    margin-right: -80px;
    margin-left: 30px;

    @include phone {
      float: none;
      width: 100%;
      margin: 0 0 1em 0;
    }
  }
}

.page .text_page, .js .page .text_page, .js .page:first-child .text_page, .page:first-child .text_page {
  &.content_and_background.sticky_inline_image .inline_text_position_center.scroller .contentWrapper {
    .inline_image {
      @media screen and (min-width: 1101px) {
        position: absolute;
        display: inline-block;
        left: 50%;
        margin: 0;
        padding: 0;
        width: 35% !important;
        max-width: 500px;
        margin-left: 50px;
        padding-bottom: 2em;
      }

      @include pageflow-text-page-block-image;
    }

    .contentText {
      @media screen and (min-width: 1101px) {
        max-width: 1000px;
        width: 84%;

        h3, p {
          margin: 0;
        }
      }
    }
  }
}

section.hide_title {
  .fixed_header_area {
    display: none;
    height: 0;
  }
  .contentInnerWrapper .page_header {
    border: 0;
  }
}

.invert {

  .contentInnerWrapper {

    .page_header {
      border-bottom: 1px solid rgb(216, 216, 216);

      h2 {
        color: black;
      }
    }
  }

  .header_background_layer {
    background-color: white !important;
  }
}

.page .text_page, .js .page .text_page {
  .scroller.invert_text {
    > div {
      .contentInnerWrapper {
        color: white;

        .content_background_layer {
          background-color: black;
        }
      }
    }
  }
}


.inline_image.out-of-scroller {
  width: 260px;
  height: 260px;
  background-size: cover;
  background-position: center;
  margin-left: 30px;
  margin-top: 0px;
  margin-bottom: 30px;
  margin-right: -80px;
  display: none;
  position: fixed;
  right: 10%;
  top: 50%;
  z-index: 1;
}

.narrow_background  {
  .content_background_layer, .header_background_layer {
    width: 800px !important;
    left: 50% !important;
    margin-left: -400px;
  }
  .contentInnerWrapper .contentText .inline_image {
    margin-right: 0 !important;
  }

  &.text_position_right {
    .contentInnerWrapper .contentText .inline_image {
      margin-left: 0 !important;
    }
  }
}
.transparent_background  {
  .content_background-layer, .header_background-layer {
    opacity: 0.9 !important;
  }
}

.slideshow section.fade[data-template="text_page"] {

  .blackLayer {
    display: none;
  }
  .backgroundArea {
    background-color: black;
    -webkit-backface-visibility: hidden;
    opacity: 1;
  }

  &.invert .backgroundArea {
    background-color: white;
  }

  .content_and_background {
    @include transition(1s ease);
  }

  &.active.animate-in-forwards .content_and_background {
    opacity: 1;
  }

  &.animate-in-forwards .content_and_background {
    opacity: 0;
  }
  &.animate-out-forwards .content_and_background {
    opacity: 1;
  }
  &.animate-in-backwards .content_and_background{
    opacity: 1;
  }
  &.animate-out-backwards .content_and_background{
    opacity: 0;
  }

  &.active.animate-in-forwards .backgroundArea {
    opacity: 1;
  }

  &.animate-in-forwards .backgroundArea {
    opacity: 1;
  }
  &.animate-out-forwards .backgroundArea{
    opacity: 1;
  }
  &.animate-in-backwards .backgroundArea{
    opacity: 1;
  }
  &.animate-out-backwards .backgroundArea{
    opacity: 1;
  }

  div.content {
    @include transition(1s ease);
    -webkit-backface-visibility: hidden;
    @include transform(translate3d(0,0,0));
  }

  &.active.animate-in-forwards div.content {
    opacity: 1;
    pointer-events: none;
    @include transform(translate3d(0,0,0));
  }

  &.animate-in-forwards {
    div.content {
      pointer-events: none;
      opacity: 1;
      @include transform(translate3d(0,0,0));
    }
  }
  &.animate-out-forwards {
    div.content {
      opacity: 1;
      pointer-events: none;
      @include transform(translate3d(0,0,0));
    }
  }
  &.animate-in-backwards {
    .content {
      opacity: 1;
      pointer-events: none;
      @include transform(translate3d(0,0,0));
    }
  }
  &.animate-out-backwards {
    .content {
      opacity: 1;
      pointer-events: none;
      @include transform(translate3d(0,0,0));
    }
  }
}